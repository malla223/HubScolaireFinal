{"version":3,"file":"ng-search-filter.js","sources":["../../../projects/ng-search-filter/src/lib/ng-search-filter.service.ts","../../../projects/ng-search-filter/src/lib/ng-search-filter.pipe.ts","../../../projects/ng-search-filter/src/lib/ng-search-filter.module.ts","../../../projects/ng-search-filter/src/public-api.ts","../../../projects/ng-search-filter/src/ng-search-filter.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class NgSearchFilterService {\n  private _defaultLang: string;\n\n  constructor() {}\n\n  private get defaultLang(): string {\n    return this._defaultLang || 'tr';\n  }\n\n  private set defaultLang(defaultLang: string) {\n    this._defaultLang = defaultLang;\n  }\n\n  public getDefaultLang(): string {\n    return this.defaultLang;\n  }\n\n  public setDefaultLang(defaultLang): void {\n    this.defaultLang = defaultLang;\n  }\n}\n","import { Pipe, PipeTransform, Injectable } from '@angular/core';\nimport { NgSearchFilterService } from './ng-search-filter.service';\n\n@Pipe({\n  name: 'filter',\n  pure: false,\n})\n@Injectable()\nexport class NgSearchFilterPipe implements PipeTransform {\n  constructor(private _ngSearchFilterService: NgSearchFilterService) {}\n  private _lang = this._ngSearchFilterService.getDefaultLang();\n  /**\n   * @param items object from array\n   * @param term term's search\n   * @param excludes array of strings which will ignored during search\n   */\n  transform(items: any, term: string, excludes: any = []): any {\n    if (!term || !items) return items;\n\n    return NgSearchFilterPipe.filter(items, term, excludes, this._lang);\n  }\n\n  /**\n   *\n   * @param items List of items to filter\n   * @param term  a string term to compare with every property of the list\n   * @param excludes List of keys which will be ignored during search\n   *\n   */\n  static filter(\n    items: Array<{ [key: string]: any }>,\n    term: string,\n    excludes: any,\n    lang: string\n  ): Array<{ [key: string]: any }> {\n    const toCompare = term.toLocaleLowerCase(lang);\n\n    function checkInside(item: any, term: string) {\n      if (\n        typeof item === 'string' &&\n        item.toString().toLocaleLowerCase(lang).includes(toCompare)\n      ) {\n        return true;\n      }\n\n      for (let property in item) {\n        if (\n          item[property] === null ||\n          item[property] == undefined ||\n          excludes.includes(property)\n        ) {\n          continue;\n        }\n        if (typeof item[property] === 'object') {\n          if (checkInside(item[property], term)) {\n            return true;\n          }\n        } else if (\n          item[property].toString().toLocaleLowerCase(lang).includes(toCompare)\n        ) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    return items.filter(function (item) {\n      return checkInside(item, term);\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { NgSearchFilterPipe } from './ng-search-filter.pipe';\n\n@NgModule({\n  declarations: [NgSearchFilterPipe],\n  exports: [NgSearchFilterPipe],\n})\nexport class NgSearchFilterModule {}\n","/*\n * Public API Surface of ng-search-filter\n */\nexport * from './lib/ng-search-filter.pipe';\nexport * from './lib/ng-search-filter.service';\nexport * from './lib/ng-search-filter.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":";;MAKa,qBAAqB;IAGhC,iBAAgB;IAEhB,IAAY,WAAW;QACrB,OAAO,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC;KAClC;IAED,IAAY,WAAW,CAAC,WAAmB;QACzC,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;KACjC;IAEM,cAAc;QACnB,OAAO,IAAI,CAAC,WAAW,CAAC;KACzB;IAEM,cAAc,CAAC,WAAW;QAC/B,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;KAChC;;0FAnBU,qBAAqB;0DAArB,qBAAqB,WAArB,qBAAqB,mBAFpB,MAAM;+CAEP,qBAAqB;cAHjC,UAAU;eAAC;gBACV,UAAU,EAAE,MAAM;aACnB;;;MCIY,kBAAkB;IAC7B,YAAoB,sBAA6C;QAA7C,2BAAsB,GAAtB,sBAAsB,CAAuB;QACzD,UAAK,GAAG,IAAI,CAAC,sBAAsB,CAAC,cAAc,EAAE,CAAC;KADQ;;;;;;IAOrE,SAAS,CAAC,KAAU,EAAE,IAAY,EAAE,WAAgB,EAAE;QACpD,IAAI,CAAC,IAAI,IAAI,CAAC,KAAK;YAAE,OAAO,KAAK,CAAC;QAElC,OAAO,kBAAkB,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;KACrE;;;;;;;;IASD,OAAO,MAAM,CACX,KAAoC,EACpC,IAAY,EACZ,QAAa,EACb,IAAY;QAEZ,MAAM,SAAS,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;QAE/C,SAAS,WAAW,CAAC,IAAS,EAAE,IAAY;YAC1C,IACE,OAAO,IAAI,KAAK,QAAQ;gBACxB,IAAI,CAAC,QAAQ,EAAE,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,EAC3D;gBACA,OAAO,IAAI,CAAC;aACb;YAED,KAAK,IAAI,QAAQ,IAAI,IAAI,EAAE;gBACzB,IACE,IAAI,CAAC,QAAQ,CAAC,KAAK,IAAI;oBACvB,IAAI,CAAC,QAAQ,CAAC,IAAI,SAAS;oBAC3B,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAC3B;oBACA,SAAS;iBACV;gBACD,IAAI,OAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,QAAQ,EAAE;oBACtC,IAAI,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,IAAI,CAAC,EAAE;wBACrC,OAAO,IAAI,CAAC;qBACb;iBACF;qBAAM,IACL,IAAI,CAAC,QAAQ,CAAC,CAAC,QAAQ,EAAE,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,EACrE;oBACA,OAAO,IAAI,CAAC;iBACb;aACF;YACD,OAAO,KAAK,CAAC;SACd;QAED,OAAO,KAAK,CAAC,MAAM,CAAC,UAAU,IAAI;YAChC,OAAO,WAAW,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SAChC,CAAC,CAAC;KACJ;;oFA7DU,kBAAkB;gEAAlB,kBAAkB;uDAAlB,kBAAkB,WAAlB,kBAAkB;+CAAlB,kBAAkB;cAL9B,IAAI;eAAC;gBACJ,IAAI,EAAE,QAAQ;gBACd,IAAI,EAAE,KAAK;aACZ;;cACA,UAAU;;;MCAE,oBAAoB;;qDAApB,oBAAoB;oHAApB,oBAAoB;qFAApB,oBAAoB,mBAHhB,kBAAkB,aACvB,kBAAkB;+CAEjB,oBAAoB;cAJhC,QAAQ;eAAC;gBACR,YAAY,EAAE,CAAC,kBAAkB,CAAC;gBAClC,OAAO,EAAE,CAAC,kBAAkB,CAAC;aAC9B;;;ACND;;;;ACAA;;;;;;"}